# 版本发布规范
###### version: 1.0
###### author:  MagicNana999@gmail.com
###### date: 2021年8月11日


### 1 服务端上线规范
* Feat 开发完毕后，Merge 到 Dev 上，部署 DEV 的测试环境，提测。保护 DEV 分支，禁止任何提交。
* 测试时，一般至少 3 轮。 
* 测试完毕后，发送上线通告。包括：版本，修改内容，时间，上线方案，回滚方案，验收方案，是否停服，相关需要配合人员。
* 从 DEV 上创建分支 Release-版本号。
* 在 Release 上生成 Release.note，（可以基于 CommitLog 自动生成，也可以手写）
* 根据上线方案部署生产环境。
* 测试人员测试。
* 验收
* 清理测试数据。
* 其他清理工作。
* 合并 Release 到 master
* 在 Release 上 tag。
* 发布上线成功通告。

### 2 前端上线规范
* 同上

### 3 客户端上线规范
* 服务端生产环境（含 H5，如有的话），必须能够同时支持客户端新旧版本的同时工作状态。
* 服务端上线后，提供新旧版本同时服务能力。
* 客户端代码管理流程同上。
* 客户端上架、测试、提审、验收。
* 客户端审核通过后服务端把流量都切换到新版本。
* 过审后，有客户端负责人发送通告。
* 开启强制更新（如果需要）


### 2 版本号管理
* 版本号分为 3 级。x.x.x
* 第一级一般不动，除非架构或者战略上有升级变化。
* 第二级包括重要功能，有重大功能更新或者新增才有变化。
* 第三级，每次更新自动加1 。
* 前端、服务端、客户端要求版本号的第一级和第二级统一，第三级可以不一样。 相同的第一级第二级证明匹配。
